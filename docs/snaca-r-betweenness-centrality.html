<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jacob T.N. Young">

<title>Social Network Analysis for Crime Analysts using R - Betweenness Centrality and Centralization</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./snaca-r-bipartite.html" rel="next">
<link href="./snaca-r-closeness-centrality.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./snaca-r-betweenness-centrality.html">Betweenness Centrality and Centralization</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Social Network Analysis for Crime Analysts using R</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/jacobtnyoung/snaca-r" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-intro-to-r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Getting Started with R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-rmarkdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Creating Data-Driven Documents using RMarkdown</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-network-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Working with Networks in R</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Basics of Network Visualization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-degree-centrality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Degree Centrality and Centralization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-closeness-centrality.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Closeness Centrality and Centralization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-betweenness-centrality.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Betweenness Centrality and Centralization</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-bipartite.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bipartite Graphs &amp; Two-Mode Networks</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./snaca-r-projection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Projection &amp; Weighted Graphs</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#betweenness-centrality-undirected-binary-graphs" id="toc-betweenness-centrality-undirected-binary-graphs" class="nav-link active" data-scroll-target="#betweenness-centrality-undirected-binary-graphs">Betweenness Centrality (Undirected Binary Graphs)</a>
  <ul class="collapse">
  <li><a href="#using-the-sna-package" id="toc-using-the-sna-package" class="nav-link" data-scroll-target="#using-the-sna-package">Using the <code>sna</code> Package</a></li>
  <li><a href="#betweenness-centralization" id="toc-betweenness-centralization" class="nav-link" data-scroll-target="#betweenness-centralization">Betweenness Centralization</a></li>
  </ul></li>
  <li><a href="#betweenness-centrality-directed-binary-graphs" id="toc-betweenness-centrality-directed-binary-graphs" class="nav-link" data-scroll-target="#betweenness-centrality-directed-binary-graphs">Betweenness Centrality (Directed Binary Graphs)</a></li>
  <li><a href="#betweenness-centrality-in-pins-get-along-with-network" id="toc-betweenness-centrality-in-pins-get-along-with-network" class="nav-link" data-scroll-target="#betweenness-centrality-in-pins-get-along-with-network">Betweenness Centrality in PINS Get Along With Network</a>
  <ul class="collapse">
  <li><a href="#get-along-with-network-undirected-network" id="toc-get-along-with-network-undirected-network" class="nav-link" data-scroll-target="#get-along-with-network-undirected-network">Get Along with Network (Undirected Network)</a></li>
  <li><a href="#power-and-influence-network-directed-network" id="toc-power-and-influence-network-directed-network" class="nav-link" data-scroll-target="#power-and-influence-network-directed-network">Power and Influence Network (Directed Network)</a></li>
  </ul></li>
  <li><a href="#test-your-knowledge-excercises" id="toc-test-your-knowledge-excercises" class="nav-link" data-scroll-target="#test-your-knowledge-excercises">Test Your Knowledge Excercises</a></li>
  <li><a href="#tutorial-summary" id="toc-tutorial-summary" class="nav-link" data-scroll-target="#tutorial-summary">Tutorial Summary</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/jacobtnyoung/snaca-r/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Betweenness Centrality and Centralization</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>How do we know whether a node is important in a network? As was discussed at the beginning of the chapter on <a href="">Degree Centrality</a>, one of the most popular concepts in network analysis is <em>centrality</em>. In that lecture, we covered how centrality can be measured by the number of edges incident on a node. Then, in the chapter on <a href="">Closeness Centrality</a>, we discussed an alternative conceptualization, <em>closeness</em>, where important nodes are those who are “close” to other nodes in the network. Finally, in the <a href="">Betweenness Centrality</a> chapter we covered a final conceptualization, <em>betweenness</em>, where important nodes are those that occupy positions between other nodes.</p>
<p>In this tutorial, we will examine how to calculate betweenness centrality and centralization scores in R using the <code>betweenness()</code> and <code>centralization()</code> functions in the <code>sna</code> package.</p>
<section id="betweenness-centrality-undirected-binary-graphs" class="level2">
<h2 class="anchored" data-anchor-id="betweenness-centrality-undirected-binary-graphs">Betweenness Centrality (Undirected Binary Graphs)</h2>
<p><em>Betweenness</em> centrality is based on the number of shortest paths between <em>j</em> and <em>k</em> that actor <em>i</em> resides on.</p>
<p>Betweenness centrality is calculated as:</p>
<p><span class="math display">\[C_B(n_i) = \sum\limits_{j&lt;k} g_{jk}(n_i) / g_{jk}\]</span></p>
<p>Where <span class="math inline">\(g_{jk}\)</span> represents the number of geodesics linking <em>j</em> to <em>k</em> and <span class="math inline">\(g_{jk}(n_i)\)</span> is the number of geodesics linking <em>j</em> and <em>k</em> that contain <em>i</em>. So, betweenness centrality is the ratio of the geodesics between <em>j</em> and <em>k</em> that contain <em>i</em> to the geodesics between <em>j</em> and <em>k</em> that <strong>do not</strong> contain <em>i</em>.</p>
<p>The <em>standardized</em> betweenness centrality score is calculated by:</p>
<p><span class="math display">\[C'_B(n_i) = \frac{\sum\limits_{j&lt;k} g_{jk}(n_i) / g_{jk}}{[(g-1)(g-2)/2]}\]</span></p>
<p>The difference here is that we are dividing by <span class="math inline">\((g-1)(g-2)/2\)</span> which is the number of pairs of actors not including <em>i</em>.</p>
<section id="using-the-sna-package" class="level3">
<h3 class="anchored" data-anchor-id="using-the-sna-package">Using the <code>sna</code> Package</h3>
<p>Let’s go ahead and set up a simple matrix and see how we use can calculate betweenness centrality using the <code>betweenness()</code> function in the <code>sna</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set up the matrix</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>u_mat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span> ),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span> ),</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span> ),</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span> ),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>( <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span> ))</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># now set the names</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>mat_names <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"Jen"</span>,<span class="st">"Tom"</span>,<span class="st">"Bob"</span>,<span class="st">"Leaf"</span>,<span class="st">"Jim"</span> )</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>( u_mat ) <span class="ot">&lt;-</span> mat_names</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>( u_mat ) <span class="ot">&lt;-</span> mat_names</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># define the number of nodes in the graph</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">dim</span>( u_mat )[<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s take a look at the <code>betweenness()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>?betweenness</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># raw</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( u_mat, <span class="at">gmode=</span><span class="st">"graph"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 3 4 0 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardized</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( u_mat, <span class="at">gmode=</span><span class="st">"graph"</span> ) <span class="sc">/</span> ( ( ( g<span class="dv">-1</span> ) <span class="sc">*</span> ( g<span class="dv">-2</span> ) ) <span class="sc">/</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0000000 0.5000000 0.6666667 0.0000000 0.0000000</code></pre>
</div>
</div>
<p>Now, let’s plot the graph so we can visualize what the betweenness score is showing. To make it easier to see, let’s add the betweenness centrality info to the labels and size the nodes by betweenness centrality. That will make it easier to visualize.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that is the scores</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>node_betweenness <span class="ot">&lt;-</span> <span class="fu">betweenness</span>( u_mat,<span class="at">gmode=</span><span class="st">"graph"</span> )</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector of labels that combines the name with the betweeness scores</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># use the paste() function to put characters and numbers together</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>names_between <span class="ot">&lt;-</span> <span class="fu">paste</span>( </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  mat_names, <span class="co"># the names of the vertices</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">", "</span>, <span class="co"># add a comma to separate name from degree</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>( node_betweenness, <span class="dv">0</span> ), <span class="co"># add the rounded distance</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">""</span> ) <span class="co"># remove the space between the two inputs </span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="co"># set the seed to reproduce the same layout</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>( <span class="dv">507</span> )</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a><span class="co"># render the plot</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  u_mat,</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"graph"</span>,</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> names_between,</span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">label.cex =</span> <span class="fl">0.6</span>,</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col =</span> <span class="st">"lightblue"</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In this plot, we see that <strong>Tom</strong> and <em>Bob</em> both have scores of 3 and 4, respectively, whereas <em>Jen</em>, <em>Leaf</em>, and <em>Jim</em> have scores of 0. Why do <em>Jen</em>, <em>Leaf</em>, and <em>Jim</em> have scores of 0? Because nobody has to go “between” them to reach other nodes.</p>
</section>
<section id="betweenness-centralization" class="level3">
<h3 class="anchored" data-anchor-id="betweenness-centralization">Betweenness Centralization</h3>
<p>We can also summarize the entire network, in terms of betweenness. <em>Group betweenness centralization</em> tells us how much variation there is in the betweenness scores. As we saw in the chapters on <a href="">Degree Centrality</a> and <a href="">Closeness Centrality</a>, this measure is bound between 0 and 1 where a value of 0 indicates complete uniformity across nodes in their centrality scores and a value of 1 indicates that one node has the highest possible centrality score, and all others are at the minimum.</p>
<p>For betweenness centrality, this is calculated as:</p>
<p><span class="math display">\[C_B = \frac{\sum\limits_{i=1}^g[C'_B(n^*)-C'_B(n_i)]}{(g-1)}\]</span></p>
<p>Where <span class="math inline">\(C'_B(n^*)\)</span> is the maximum or largest standardized betweenness centrality score. To calculate the group betweenness centrality, we can use the <code>centralization()</code> function in <code>sna</code> and specify <code>betweenness</code> in the <code>FUN</code> argument.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>?centralization</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>( u_mat, betweenness, <span class="at">mode=</span><span class="st">"graph"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.5416667</code></pre>
</div>
</div>
<p><em>What does the centralization score of 0.54 tell us?</em></p>
</section>
</section>
<section id="betweenness-centrality-directed-binary-graphs" class="level2">
<h2 class="anchored" data-anchor-id="betweenness-centrality-directed-binary-graphs">Betweenness Centrality (Directed Binary Graphs)</h2>
<p>As with undirected graphs, we can calculate betweenness centrality scores for directed graphs. In a directed binary graph, betweenness centrality has the same interpretation, but it takes into account the directional nature of the graph.</p>
<p>For example, consider two scenarios:</p>
<ul>
<li>Suppose Laura sends a tie to Miguel and he sends a tie to Bruce (i.e.&nbsp;Laura -&gt; Miguel -&gt; Bruce). Here, Miguel is between Laura and Bruce and has a betweeness score of 1.</li>
<li>Now suppose Laura sends a tie to Miguel and Bruce sends a tie to Miguel (i.e.&nbsp;Laura -&gt; Miguel &lt;- Bruce).</li>
<li><em>Is Miguel between Laura and Bruce now?</em></li>
</ul>
<p>Let’s take a look at this using the network from the <a href="">Betweenness Centrality</a> chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># build the matrix</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>d_mat <span class="ot">&lt;-</span> <span class="fu">rbind</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>),</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># attach the names</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>( d_mat ) <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"Jen"</span>,<span class="st">"Tom"</span>,<span class="st">"Bob"</span>,<span class="st">"Leaf"</span>,<span class="st">"Jim"</span> )</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>( d_mat ) <span class="ot">&lt;-</span> <span class="fu">c</span>( <span class="st">"Jen"</span>,<span class="st">"Tom"</span>,<span class="st">"Bob"</span>,<span class="st">"Leaf"</span>,<span class="st">"Jim"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s use the same code we used above to calculate the betweenness centrality scores. Note, however, that we have to change the <code>gmode=</code> argument in the <code>betweenness()</code> and <code>centralization()</code> functions to be <code>digraph</code> since the graph is directed and we want to include the information on directionality in the calculations (recall that for undirected graphs we use <code>graph</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the number of nodes in the graph for our calculation</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">dim</span>( d_mat )[<span class="dv">1</span>]</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="co"># unstandardized</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( d_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 3 4 0 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardized</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( d_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> ) <span class="sc">/</span> ( ( ( g<span class="dv">-1</span> ) <span class="sc">*</span> ( g<span class="dv">-2</span> ) ) <span class="sc">/</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0000000 0.5000000 0.6666667 0.0000000 0.0000000</code></pre>
</div>
</div>
<p>Let’s plot this to better visualize the scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># create an object that is the scores</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>node_betweenness <span class="ot">&lt;-</span> <span class="fu">betweenness</span>( d_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> )</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co"># create a vector of labels that combines the name with the betweeness scores</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># use the paste() function to put characters and numbers together</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>names_between <span class="ot">&lt;-</span> <span class="fu">paste</span>( </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  mat_names, <span class="co"># the names of the vertices</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">", "</span>, <span class="co"># add a comma to separate name from degree</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>( node_betweenness, <span class="dv">0</span> ), <span class="co"># add the rounded distance</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">""</span> ) <span class="co"># remove the space between the two inputs </span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co"># set the seed to reproduce the same layout</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>( <span class="dv">507</span> )</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># render the plot</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>  d_mat,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"digraph"</span>,</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">label =</span> names_between,</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">label.cex =</span> <span class="fl">0.6</span>,</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead.cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col =</span> <span class="st">"#2e5087"</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Finally, let’s examine the betweenness centralization score:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group Betweenness Centralization.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>( d_mat, betweenness, <span class="at">mode=</span><span class="st">"digraph"</span> ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2708333</code></pre>
</div>
</div>
<p><em>What does the centralization score of 0.27 tell us?</em></p>
<p>Compare the centralization score of 0.54 for the undirected graph above and the centralization score of 0.27 for the directed graph we just calculated.</p>
<p>Bonus question: <em>Which one is larger? What does the difference in the values mean in terms of how betweenness scores are distributed in the graph?</em></p>
</section>
<section id="betweenness-centrality-in-pins-get-along-with-network" class="level2">
<h2 class="anchored" data-anchor-id="betweenness-centrality-in-pins-get-along-with-network">Betweenness Centrality in PINS Get Along With Network</h2>
<p>The <a href="https://cjrc.la.psu.edu/research/"><em>Prison Inmate Networks Study (PINS)</em></a> examines the social networks of prison inmates in a state correctional institution. The study was unique in that it was the first in nearly a century to collection sociometric data in a prison. The researchers collected data on several types of networks. There are two we want to look at here:</p>
<ul>
<li><p>The <em>get along with network</em> was created by asking individuals whom they “get along with” on the unit. We can think of this as “friends” in a prison setting. (People don’t really have “friends” in prison, but there are people they “get along with”)</p></li>
<li><p>The <em>power and influence network</em> was created by asking individuals whom they believed was “powerful and influential” on the unit.</p></li>
</ul>
<p>Let’s examine the betweenness centrality scores for both of these networks.</p>
<section id="get-along-with-network-undirected-network" class="level3">
<h3 class="anchored" data-anchor-id="get-along-with-network-undirected-network">Get Along with Network (Undirected Network)</h3>
<p>For the <em>get along with</em> network, individuals could have asymmetric nominations. That is, <em>i</em> could nominate <em>j</em> and <em>j</em> didn’t necessarily nominate <em>i</em>. But, we are going to <strong>symmetrize</strong> the network by only taking ties for which <strong><em>both</em></strong> <em>i</em> and <em>j</em> indicated that the get along with the other person. This will give us an undirected network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set the location for the file</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="st">"https://github.com/jacobtnyoung/snaca-r/raw/main/data/data-PINS-getalong-w1-adj.csv"</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the .csv file</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>ga_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read.csv</span>( </span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    loc,</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">as.is =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="dv">1</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a><span class="co"># use the symmetrize() function to create an undirected matrix</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>ga_mat_u <span class="ot">&lt;-</span> <span class="fu">symmetrize</span>( ga_mat, <span class="at">rule =</span> <span class="st">"strong"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s calculate our betweenness scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the number of nodes in the graph for our calculation</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">dim</span>( ga_mat_u )[<span class="dv">1</span>]</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># unstandardized</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]   0.000000   0.000000   0.000000 140.000000   0.000000   0.000000
  [7]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [13]  94.000000   0.000000   0.000000   0.000000 291.866667   0.000000
 [19]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [25]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [31]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [37]   0.000000   0.000000   0.000000 242.666667  48.000000  86.216667
 [43] 209.966667   1.000000   0.000000 237.333333 335.366667   0.000000
 [49]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [55]   0.000000  27.200000   0.000000   0.000000   0.000000   0.000000
 [61]   0.000000  51.516667   0.000000   0.000000   0.000000   0.000000
 [67]  19.166667  16.700000 140.000000 141.150000   0.000000   0.000000
 [73]   0.000000   0.000000   0.000000   0.000000   1.000000   0.000000
 [79]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
 [85]   0.000000   2.000000   0.000000   0.000000   0.000000   0.000000
 [91]   0.000000   0.000000   0.000000   0.000000 180.000000   4.033333
 [97]   0.000000   0.000000   0.000000   3.000000   0.000000  48.000000
[103]   0.000000  48.000000   0.000000   0.000000   0.000000 272.200000
[109]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[115]   0.000000   0.000000   0.000000   0.000000   2.000000   0.000000
[121]   0.000000 358.733333   0.000000   0.000000  26.166667   0.000000
[127]   3.983333   0.000000  39.200000   0.000000   0.000000   0.000000
[133]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[139]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[145]   0.000000   0.000000   0.000000  19.166667   0.000000   0.000000
[151]  11.000000   0.000000   0.000000   0.000000 681.733333   0.000000
[157]   0.000000 302.000000   0.000000   0.000000   0.000000  95.000000
[163] 343.966667   0.000000   0.000000 184.666667   0.000000   0.000000
[169]   0.000000   0.000000   0.000000   0.000000   0.000000   2.000000
[175]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[181]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[187]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[193]   1.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[199]   0.000000   0.000000   0.000000   0.000000   0.000000   0.000000
[205]   0.000000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardized</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> ) <span class="sc">/</span> ( ( ( g<span class="dv">-1</span> ) <span class="sc">*</span> ( g<span class="dv">-2</span> ) ) <span class="sc">/</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 0.000000e+00 0.000000e+00 0.000000e+00 6.761325e-03 0.000000e+00
  [6] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [11] 0.000000e+00 0.000000e+00 4.539747e-03 0.000000e+00 0.000000e+00
 [16] 0.000000e+00 1.409575e-02 0.000000e+00 0.000000e+00 0.000000e+00
 [21] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [26] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [31] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [36] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 1.171963e-02
 [41] 2.318169e-03 4.163849e-03 1.014038e-02 4.829518e-05 0.000000e+00
 [46] 1.146206e-02 1.619659e-02 0.000000e+00 0.000000e+00 0.000000e+00
 [51] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [56] 1.313629e-03 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [61] 0.000000e+00 2.488007e-03 0.000000e+00 0.000000e+00 0.000000e+00
 [66] 0.000000e+00 9.256576e-04 8.065295e-04 6.761325e-03 6.816865e-03
 [71] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [76] 0.000000e+00 4.829518e-05 0.000000e+00 0.000000e+00 0.000000e+00
 [81] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [86] 9.659036e-05 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [91] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 8.693132e-03
 [96] 1.947906e-04 0.000000e+00 0.000000e+00 0.000000e+00 1.448855e-04
[101] 0.000000e+00 2.318169e-03 0.000000e+00 2.318169e-03 0.000000e+00
[106] 0.000000e+00 0.000000e+00 1.314595e-02 0.000000e+00 0.000000e+00
[111] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[116] 0.000000e+00 0.000000e+00 0.000000e+00 9.659036e-05 0.000000e+00
[121] 0.000000e+00 1.732509e-02 0.000000e+00 0.000000e+00 1.263724e-03
[126] 0.000000e+00 1.923758e-04 0.000000e+00 1.893171e-03 0.000000e+00
[131] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[136] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[141] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[146] 0.000000e+00 0.000000e+00 9.256576e-04 0.000000e+00 0.000000e+00
[151] 5.312470e-04 0.000000e+00 0.000000e+00 0.000000e+00 3.292443e-02
[156] 0.000000e+00 0.000000e+00 1.458514e-02 0.000000e+00 0.000000e+00
[161] 0.000000e+00 4.588042e-03 1.661193e-02 0.000000e+00 0.000000e+00
[166] 8.918510e-03 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[171] 0.000000e+00 0.000000e+00 0.000000e+00 9.659036e-05 0.000000e+00
[176] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[181] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[186] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[191] 0.000000e+00 0.000000e+00 4.829518e-05 0.000000e+00 0.000000e+00
[196] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[201] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</code></pre>
</div>
</div>
<p>Let’s create a plot that has the nodes sized by their betweenness centrality score.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  ga_mat_u, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"graph"</span>,</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.col=</span><span class="st">"grey40"</span>, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span><span class="st">"#ba491c"</span>,</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.cex =</span> <span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> ),</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Get Along With Network (Undirected)"</span>,</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">"node sized by betweenness centrality"</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Wait</strong>? <em>Something isn’t right</em>…All I see is a blob of color. This is because the size of the nodes in the plot are HUGE! We can see this by using the <code>max()</code> function. The <code>max()</code> function finds the maximum value of a vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>( <span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> ) )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 681.7333</code></pre>
</div>
</div>
<p>The largest betweenness centrality score is 681.7333333, so the plot is using this value. What we need is to adjust the centrality scores so that they are not so large. Fortunately, there is a simple function we can write to do this.</p>
<p>Let’s use the <code>rescale()</code> function to adjust the node sizes in our plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>rescale <span class="ot">&lt;-</span> <span class="cf">function</span>( nchar, low, high ){</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  min_d <span class="ot">&lt;-</span> <span class="fu">min</span>( nchar )</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  max_d <span class="ot">&lt;-</span> <span class="fu">max</span>( nchar )</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  rscl  <span class="ot">&lt;-</span> ( ( high <span class="sc">-</span> low )<span class="sc">*</span>( nchar <span class="sc">-</span> min_d ) ) <span class="sc">/</span> ( max_d <span class="sc">-</span> min_d ) <span class="sc">+</span> low</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  rscl</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, use the function we created to rescale the size of the nodes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  ga_mat_u, </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"graph"</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.col=</span><span class="st">"grey40"</span>, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span><span class="st">"#ba491c"</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.cex =</span> <span class="fu">rescale</span>( <span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> ), <span class="fl">0.5</span>, <span class="fl">2.5</span> ),</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Get</span><span class="sc">\n</span><span class="st"> Along With Network (Undirected)"</span>,</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">"node sized by betweenness centrality"</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Much better. Yet, it is still a bit difficult to see the differences due to the number of isolates (i.e.&nbsp;nodes without any edges). Let’s remove them using the <code>displayisolates =</code> argument. We will set it to <code>FALSE</code> to not display nodes that are isolates.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  ga_mat_u, </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"graph"</span>,</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.col=</span><span class="st">"grey40"</span>, </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span><span class="st">"#ba491c"</span>,</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.cex =</span> <span class="fu">rescale</span>( <span class="fu">betweenness</span>( ga_mat_u, <span class="at">gmode=</span><span class="st">"graph"</span> ), <span class="fl">0.5</span>, <span class="fl">2.5</span> ),</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Get</span><span class="sc">\n</span><span class="st"> Along With Network (Undirected)"</span>,</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">"node sized by betweenness centrality"</span>,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">displayisolates =</span> <span class="cn">FALSE</span> <span class="co"># here we set it to FALSE, TRUE is the default</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now we can examine the centralization score for the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>( ga_mat_u, betweenness, <span class="at">mode=</span><span class="st">"graph"</span> ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.03197054</code></pre>
</div>
</div>
<p><em>What does the centralization score of 0.03 tell us?</em></p>
</section>
<section id="power-and-influence-network-directed-network" class="level3">
<h3 class="anchored" data-anchor-id="power-and-influence-network-directed-network">Power and Influence Network (Directed Network)</h3>
<p>For the <em>power and influence</em> network, individuals could have asymmetric nominations. That is, <em>i</em> could nominate <em>j</em> and <em>j</em> didn’t necessarily nominate <em>i</em>. We will keep this asymmetry so that we can treat the network as directed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set the location for the file</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>loc <span class="ot">&lt;-</span> <span class="st">"https://github.com/jacobtnyoung/snaca-r/raw/main/data/data-PINS-power-w1-adj.csv"</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read in the .csv file</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>pi_mat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read.csv</span>( </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    loc,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">as.is =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">row.names =</span> <span class="dv">1</span> </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We have created a directed network where ties represent “power and influence” nominations from <em>i</em> to <em>j</em>. Now, let’s calculate our betweenness scores.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define the number of nodes in the graph for our calculation</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">dim</span>( pi_mat )[<span class="dv">1</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="co"># unstandardized</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( pi_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  9.0  0.0  0.0 59.5  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 [16]  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  7.0  0.0  0.0  0.0  0.0  0.0
 [31]  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  7.0  0.0  0.0  0.0  0.0  0.0
 [46] 49.5  5.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 [61]  0.0  0.0  0.0  0.0  0.0  0.0 28.5  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 [76]  0.0  0.0  0.0  0.0  0.0  3.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
 [91]  0.0  0.0  0.0  0.0  0.0  0.0  0.0 19.0  0.0  0.0  0.0  2.0  0.0  0.0  0.0
[106]  0.0  0.0  4.0  0.0  6.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0 12.0  0.0
[121]  2.0  7.0  0.0  0.0  0.0  0.0  0.0  0.0  5.5  1.5  0.0  0.0  0.0  1.0  0.0
[136]  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0 10.0  0.0  0.0
[151]  0.0  0.0  5.0  0.0  0.0  4.0  0.0  0.0  0.0  0.0  0.0  7.5  0.0  0.0  0.0
[166] 51.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  4.0  0.0  0.0  0.0
[181]  0.0  0.0  0.0  0.0  0.0  0.0 77.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0
[196]  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0  0.0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># standardized</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">betweenness</span>( pi_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> ) <span class="sc">/</span> ( ( ( g<span class="dv">-1</span> ) <span class="sc">*</span> ( g<span class="dv">-2</span> ) ) <span class="sc">/</span> <span class="dv">2</span> )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 4.346566e-04 0.000000e+00 0.000000e+00 2.873563e-03 0.000000e+00
  [6] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [11] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [16] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [21] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 3.380663e-04
 [26] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [31] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [36] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 3.380663e-04
 [41] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [46] 2.390611e-03 2.414759e-04 0.000000e+00 0.000000e+00 0.000000e+00
 [51] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [56] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [61] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [66] 0.000000e+00 1.376413e-03 0.000000e+00 0.000000e+00 0.000000e+00
 [71] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [76] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [81] 1.448855e-04 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [86] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [91] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
 [96] 0.000000e+00 0.000000e+00 9.176084e-04 0.000000e+00 0.000000e+00
[101] 0.000000e+00 9.659036e-05 0.000000e+00 0.000000e+00 0.000000e+00
[106] 0.000000e+00 0.000000e+00 1.931807e-04 0.000000e+00 2.897711e-04
[111] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[116] 0.000000e+00 0.000000e+00 0.000000e+00 5.795422e-04 0.000000e+00
[121] 9.659036e-05 3.380663e-04 0.000000e+00 0.000000e+00 0.000000e+00
[126] 0.000000e+00 0.000000e+00 0.000000e+00 2.656235e-04 7.244277e-05
[131] 0.000000e+00 0.000000e+00 0.000000e+00 4.829518e-05 0.000000e+00
[136] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[141] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[146] 0.000000e+00 0.000000e+00 4.829518e-04 0.000000e+00 0.000000e+00
[151] 0.000000e+00 0.000000e+00 2.414759e-04 0.000000e+00 0.000000e+00
[156] 1.931807e-04 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[161] 0.000000e+00 3.622139e-04 0.000000e+00 0.000000e+00 0.000000e+00
[166] 2.463054e-03 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[171] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[176] 0.000000e+00 1.931807e-04 0.000000e+00 0.000000e+00 0.000000e+00
[181] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[186] 0.000000e+00 3.718729e-03 0.000000e+00 0.000000e+00 0.000000e+00
[191] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[196] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00
[201] 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00 0.000000e+00</code></pre>
</div>
</div>
<p>Now, we can plot it to examine the scores:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  pi_mat, </span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"digraph"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.col=</span><span class="st">"grey40"</span>, </span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span><span class="st">"#0b7344"</span>,</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.cex =</span> <span class="fu">rescale</span>( <span class="fu">betweenness</span>( pi_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> ), <span class="fl">0.5</span>, <span class="fl">2.5</span> ),</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead.cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Power/Influence Network (Directed)"</span>,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">"node sized by betweenness centrality"</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Again, let’s remove the isolates:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>( </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  pi_mat, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode =</span> <span class="st">"digraph"</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.col=</span><span class="st">"grey40"</span>, </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span><span class="st">"#0b7344"</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.cex =</span> <span class="fu">rescale</span>( <span class="fu">betweenness</span>( pi_mat, <span class="at">gmode=</span><span class="st">"digraph"</span> ), <span class="fl">0.5</span>, <span class="fl">2.5</span> ),</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">arrowhead.cex =</span> <span class="fl">0.5</span>,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">main =</span> <span class="st">"Power/Influence Network (Directed)"</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">sub =</span> <span class="st">"node sized by betweenness centrality"</span>,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">displayisolates =</span> <span class="cn">FALSE</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="snaca-r-betweenness-centrality_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Examine the centralization score for the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">centralization</span>( pi_mat, betweenness, <span class="at">mode=</span><span class="st">"digraph"</span> ) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.00182267</code></pre>
</div>
</div>
<p>A few questions:</p>
<ul>
<li>What do we see in the plot?</li>
<li>What does the closeness centralization score of 0.0018 indicate?</li>
</ul>
</section>
</section>
<section id="test-your-knowledge-excercises" class="level2">
<h2 class="anchored" data-anchor-id="test-your-knowledge-excercises">Test Your Knowledge Excercises</h2>
<ul>
<li>Define betweenness centrality and explain its importance in network analysis.</li>
<li>Modify the matrix <code>u_mat</code> to include a new node and recalculate the betweenness centrality scores. How do the scores change?</li>
<li>For the directed graph <code>d_mat</code>, calculate the betweenness centrality and plot the graph. How does the directionality affect the results?</li>
<li>Compare the centralization scores of <code>u_mat</code> (undirected) and <code>d_mat</code> (directed). What does the difference indicate about the distribution of betweenness scores?</li>
<li>Visualize the “Power and Influence Network” as a directed graph with node sizes proportional to their betweenness centrality scores. Describe key observations from the plot.</li>
<li>Discuss the implications of removing isolates from a network visualization using the “Get Along With Network” as an example.</li>
<li>Explain the meaning of the betweenness centralization score for the “Power and Influence Network” and how it compares to the betweenness centralization score for the “Get Along With Network”.</li>
<li>Interpret the maximum betweenness centrality score for the “Get Along With Network” and discuss its implications for network structure. Do the same for the “Power and Influence Network”.</li>
</ul>
</section>
<section id="tutorial-summary" class="level2">
<h2 class="anchored" data-anchor-id="tutorial-summary">Tutorial Summary</h2>
<p>This tutorial introduced the concept of betweenness centrality and centralization and how it can be calculated using the <code>betweenness()</code> function in the <code>sna</code> package in R., key measures in social network analysis used to identify important nodes in a network based on their intermediary roles. We reviewed this calculation for both undirected and directed networks, illustrating how directionality influences betweenness scores and centralization metrics.These exercises demonstrated how betweenness centrality and centralization provide valuable insights into social dynamics and power structures within criminal justice contexts.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./snaca-r-closeness-centrality.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Closeness Centrality and Centralization</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./snaca-r-bipartite.html" class="pagination-link">
        <span class="nav-page-text">Bipartite Graphs &amp; Two-Mode Networks</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">Social Network Analysis for Crime Analysts using R was written by <a href="https://jacobtnyoung.github.io/">Jacob T.N. Young</a></div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">This book was built with <a href="https://quarto.org/">Quarto</a>.</div>
  </div>
</footer>



</body></html>